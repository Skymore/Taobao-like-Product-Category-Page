### 技术细节文档

#### 1. 总体架构

本项目使用ReactJS作为前端框架，Express.js作为后端服务器，通过REST API与前端进行数据交互。项目中主要包含两个部分：分类侧边栏（Sidebar）和主内容区（MainContent）。

#### 2. 分类侧边栏（Sidebar）

**文件位置**：`src/components/Sidebar.js`

**功能描述**：
- 显示所有商品的一级分类。
- 允许用户通过点击不同的分类来更新主内容区显示的商品。
- 点击分类后，该分类项自动滚动到侧边栏的中心位置。

**实现细节**：
- 使用`useState`来管理当前选中的分类`categoryId`。
- 使用`useEffect`来处理初次加载和分类点击后的数据更新。
- 利用CSS的`scrollIntoView`方法实现点击分类后自动滚动到中心的效果。

**状态流动**：
- 当用户点击某个分类时，`categoryId`状态更新。
- 此状态更新触发组件重新渲染，同时调用API获取新分类的商品数据。
- 数据获取后，更新状态并重新渲染商品显示区域。

#### 3. 主内容区（MainContent）

**文件位置**：`src/components/MainContent.js`

**功能描述**：
- 显示选中分类下的所有子分类及其商品。
- 允许用户通过顶部筛选条切换不同的子分类。
- 随着用户滚动，顶部筛选条自动更新以反映当前可见的子分类。

**实现细节**：
- 使用`useState`来管理当前显示的子分类`subcategoryId`。
- 使用`useEffect`来处理子分类的数据加载和滚动事件的监听。
- 滚动事件处理函数中，计算当前滚动位置并更新`subcategoryId`，同时使用`scrollIntoView`确保筛选项在顶部筛选条中居中显示。
- 使用一个自定义的`debounce`函数来优化滚动事件的处理，减少性能消耗。

**状态流动**：
- `subcategoryId`状态根据用户滚动位置更新，影响顶部筛选条的显示。
- 每当`subcategoryId`更新，组件会重新调用API获取对应子分类的商品数据，并更新显示。

#### 4. 数据处理

**文件位置**：`src/apis/categoryService.js`

**功能描述**：
- 从后端API获取分类数据和子分类下的商品数据。

**实现细节**：
- 使用`axios`库向后端发送HTTP请求。
- 封装`fetchCategories`和`fetchSubcategories`函数，分别用于获取一级分类列表和指定分类下的子分类及商品。

#### 5. 样式

**文件位置**：`src/styles/index.scss`

**功能描述**：
- 定义应用的全局和组件级别的样式。

**实现细节**：
- 使用SCSS为项目提供更灵活的样式编写方式。
- 使用BEM命名方法来组织CSS类，提高样式的可维护性。

#### 6. 后端模拟

**文件位置**：`server/index.js`

**功能描述**：
- 提供静态文件服务。
- 模拟REST API，返回商品分类和商品数据。

**实现细节**：
- 使用Express.js创建简单的服务器。
- 使用JSON文件存储静态数据，通过API端点返回相应的数据。

